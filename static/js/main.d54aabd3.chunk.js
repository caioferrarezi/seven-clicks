(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),i=a.n(s),o=(a(18),a(2)),l=a.n(o),c=a(3),u=a(6),h=a(7),m=a(8),p=a(11),f=a(9),v=a(10),b=a(1),d=/\[\[\w.[^|]+?\]\]/gi,g=/\[|\]|\w+:/g,k=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={firstTerm:"",lastTerm:"",resultMessage:"The result of your search will appear here",listOfTerms:[]},a.handleInputChange=a.handleInputChange.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target.value,a=e.target.name;this.setState(Object(u.a)({},a,t))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({listOfTerms:[]}),this.state.firstTerm&&this.loopWiki(this.state.firstTerm,0)}},{key:"loopWiki",value:function(){var e=Object(c.a)(l.a.mark(function e(t,a){var n=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a<7)){e.next=3;break}return e.next=3,this.goWiki(t).then(function(e){console.log(e,a),e&&n.loopWiki(e,a+1)});case 3:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchTerm",value:function(){var e=Object(c.a)(l.a.mark(function e(t){var a,n=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return a="https://en.wikipedia.org/w/api.php?action=opensearch&origin=*&format=json&search="+t,e.abrupt("return",fetch(a).then(function(e){return e.json()}).then(function(e){var t=e[1],a=e[3];return t[0]?(n.setState(function(e){e.listOfTerms.push({term:t[0],link:a[0]})}),t[0]):null}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"goWiki",value:function(){var e=Object(c.a)(l.a.mark(function e(t){var a,n=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchTerm(t);case 2:if(!(t=e.sent)){e.next=8;break}return a="https://en.wikipedia.org/w/api.php?action=query&origin=*&prop=revisions&rvprop=content&format=json&titles="+t.replace(" ","_"),e.abrupt("return",fetch(a).then(function(e){return e.json()}).then(function(e){var t=e.query.pages,a=t[Object.keys(t)[0]];if(n.state.lastTerm){var r=a.revisions[0]["*"],s=a.title,i=new RegExp(n.state.lastTerm,"gi"),o=r.match(i)||[];if(o.length>0)return n.setState({resultMessage:"We've found the term '".concat(o[0],"' ").concat(o.length," times in the ").concat(s,"'s content")}),!1;var l=(o=r.match(d))[Math.floor(Math.random()*o.length)].replace(g,"");return n.setState({resultMessage:"We're so sorry, but our search didn't find anything ):"}),l}}));case 8:return this.setState({resultMessage:"We've reached out our possibilities, so sorry ):"}),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.listOfTerms;return r.a.createElement("div",{className:"s-app"},r.a.createElement("header",{className:"o-header"},r.a.createElement("div",{className:"o-header__title"},r.a.createElement("h1",null,"Result"),r.a.createElement("p",null,this.state.resultMessage)),r.a.createElement("form",{className:"o-form",onSubmit:this.handleSubmit},r.a.createElement("label",null,"Initial Term",r.a.createElement("input",{value:this.state.firstTerm,onChange:this.handleInputChange,name:"firstTerm",type:"text",autoComplete:"off",className:"o-form__input"})),r.a.createElement("label",null,"Last Term",r.a.createElement("input",{value:this.state.lastTerm,onChange:this.handleInputChange,name:"lastTerm",type:"text",autoComplete:"off",className:"o-form__input"})),r.a.createElement("button",{type:"submit",className:"o-form__button"},"Search"))),r.a.createElement("main",{className:"o-result"},e.length>0&&r.a.createElement("ol",{className:"o-result__list"},e.map(function(e,t){return r.a.createElement("li",{key:t},e.term,r.a.createElement("a",{href:e.link,target:"_blank"},"view full article \u2192"))}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.d54aabd3.chunk.js.map